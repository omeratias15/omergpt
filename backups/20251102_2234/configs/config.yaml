database:
  path: data/market_data.duckdb
  checkpoint_interval: 300
  vacuum_interval: 3600
  retention_days: 90
  max_connections: 4

data_sources:
  binance:
    enabled: true
    symbols:
      - BTCUSDT
      - ETHUSDT
      - SOLUSDT
      - BNBUSDT
      - XRPUSDT
      - DOGEUSDT
      - ADAUSDT
      - AVAXUSDT
      - MATICUSDT
      - DOTUSDT
    interval: "1m"
    ws_url: wss://stream.binance.com:9443/stream
    timeout: 30
    ping_interval: 20
    initial_backoff: 1
    max_backoff: 60
    max_retries: 10
    batch_size: 20
  kraken:
    enabled: true
    symbols:
      - BTC/USDT
      - ETH/USDT
    interval: 1
    ws_url: wss://ws.kraken.com
    timeout: 30
    ping_interval: 15
    initial_backoff: 1
    max_backoff: 60
    max_retries: 10
    batch_size: 20
  etherscan:
    enabled: true
    api_key: ${ETHERSCAN_API_KEY}
    addresses:
      - "0x1111111254fb6c44bac0bed2854e76f90643097d"
      - "0xe592427a0aeb6b7b0edddc9bfd199a85dbc73d69"
    poll_interval: 15
    request_timeout: 20
    max_retries: 10
    rate_limit_per_sec: 5
    initial_backoff: 1
    max_backoff: 60
    batch_size: 50

features:
  window_sizes:
    - 5
    - 15
    - 60
  update_interval: 60
  lookback_minutes: 120
  gpu_enabled: true
  cache_size: 1000
  batch_processing: true
  parallel_symbols: 4
  batch_interval: 5   # תוספת: הרצה קבועה כל 5 שניות

anomaly_detection:
  model: isolation_forest
  enabled: true
  gpu_enabled: true
  check_interval: 60
  retrain_interval: 3600
  model_params:
    n_estimators: 100
    max_samples: auto
    contamination: 0.01   # תוספת: לפי דרישת המחקר §3.1
    random_state: 42
    window_minutes: 120
  save_model_interval: 21600
  checkpoint_dir: checkpoints

signals:
  enabled: true
  update_interval: 60
  lookback_minutes: 30
  thresholds:
    rsi_oversold: 30
    rsi_overbought: 70
    volatility_spike: 1.5
    momentum_threshold: 0.02
    anomaly_buy: 0.9
    anomaly_sell: 0.9
    min_confidence: 0.3
  hybrid_mode: true
  symbols_blacklist: []
  signal_retention_days: 30

alerts:
  telegram:
    enabled: true
    token: ${TELEGRAM_BOT_TOKEN}
    chat_ids:
      - "123456789"
      - "-987654321"
    polling_interval: 30
    max_alerts_per_minute: 5
    parse_mode: MarkdownV2
    request_timeout: 10
    retry_attempts: 3
    queue_size: 100
  discord:
    enabled: false
    webhook_url: ${DISCORD_WEBHOOK_URL}
  email:
    enabled: false
    smtp_server: smtp.gmail.com
    from_address: ${EMAIL_FROM}
    to_addresses:
      - admin@example.com
  console_log:
    enabled: true
    log_level: INFO

logging:
  level: INFO
  log_to_file: true
  file_path: logs
  filename_pattern: omergpt_%Y%m%d_%H%M%S.log
  rotation: 1 day
  max_files: 7
  format: '%(asctime)s [%(levelname)s] %(name)s: %(message)s'
  structured_logs: false
  latency: true              # תוספת
  batch_performance: true    # תוספת

scheduler:
  max_concurrent_tasks: 8
  task_timeout: 300
  graceful_shutdown_timeout: 15
  heartbeat_interval: 10
  health_check_interval: 60
  restart_on_failure: true
  restart_delay: 5

system:
  version: "1.0.0"
  environment: production
  timezone: UTC
  debug_mode: false
  profiling_enabled: false
  save_state_interval: 300
  state_file: state.json

gpu:
  enabled: true

ensemble:
  weights:
    isolation_forest: 0.4
    hmm: 0.3
    dbscan: 0.3
